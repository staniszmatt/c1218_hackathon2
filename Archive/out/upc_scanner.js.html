<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: upc_scanner.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: upc_scanner.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>class UPC_Scanner{
  
  constructor(){ 
    this.barcodeNumber = null;
    this.barCodeInput = null; 
    this.cameraActivated = false;  //Determins if camera has been activated, if not, no need to shut off. 
    this.upc_post_request = new UPC_post_request();
    //Binding Section
    this.processedCallBack = this.processedCallBack.bind(this);
    this.initScanner = this.initScanner.bind(this);
    this.handleError = this.handleError.bind(this);
    this.stopScanning = this.stopScanning.bind(this);
  }
/**
 *  @param {none} initScanner The scanner grabs the images of a bar code and submits it 
 * once it detects a readable bar code.
 * @see Quagga.init
 * @see Quagga.start
 * @see Quagga.onDetected
 * For more information, follow the link
 * @see {@link https://serratus.github.io/quaggaJS/#node-example}
 * @see processedCallBack(returnData)
 * @see handleError(err)
 */
  initScanner(){  //Initialize Quagga scanner and request access to camera
    Quagga.init({
      inputStream : {
        name : "Live",
        type : "LiveStream",
        target: document.querySelector('.scanner-image')  //TODO: target area for video scanning
      },
      decoder : {
        readers : ["upc_reader"]
      }
    }, (err) => {
          if (err) {
            this.handleError(err);
            return;
        }
        console.log("Initialization finished. Ready to start");
        Quagga.start();
        Quagga.onDetected(this.processedCallBack);
    });
  }
  /**
   * @param {Object} returnData - the scanned barcode data returned from scanner
   * @see {@link initScanner()}
   */
  processedCallBack(returnData){
    console.log("Test Init",initialization);
    console.log("Process Data ", returnData);
    if(!isNaN(returnData)){
      this.barcodeNumber = returnData; //TODO: Add error check enousre data is there!
      this.upc_post_request.setScanedData(this.barcodeNumber);
    } else  {
    this.barcodeNumber = returnData.codeResult.code;//"610370565025"
    this.upc_post_request.setScanedData(this.barcodeNumber)
    }  
    this.stopScanning();
  }
  stopScanning(){
    console.log("camera truthy ", this.cameraActivated);
    if (!this.cameraActivated){
      return;
    } else {
    Quagga.offDetected();
    Quagga.stop();
    initialization.domInformation.cancelScanButton.hide();
    }
  }
  /** 
   * @param {Object} err - If scanner errors, will return error object information
   * @see  {@link initScanner()}
   */
  handleError(err){
    initialization.modalErrors.show("CAMERA COULD NOT LOAD. TRY AGAIN");

  }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Feb 03 2019 16:19:40 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
